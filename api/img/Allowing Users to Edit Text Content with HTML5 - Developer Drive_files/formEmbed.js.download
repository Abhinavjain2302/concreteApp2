(function($){var emailRegex=/\S+@\S+\.\S+/;var emailOctopus={debug:window.location.href.indexOf('eoDebug=1')!==-1,successMessage:'Thanks for subscribing!',missingEmailAddressMessage:'Your email address is required.',invalidEmailAddressMessage:'Your email address looks incorrect, please try again.',botSubmissionErrorMessage:'This doesn\'t look like a human submission.',consentRequiredMessage:'Please check the checkbox to indicate your consent.',invalidParametersErrorMessage:'This form has missing or invalid fields.',unknownErrorMessage:'Sorry, an unknown error has occurred. Please try again later.',isBotPost:function($form){return $form.find('.email-octopus-form-row-hp input').val();},basicValidateEmail:function(email){return emailRegex.test(email);},consentRequired:function($form){var $checkbox=$form.find('.email-octopus-form-row-consent input');return $checkbox.length&&!$checkbox.is(':checked');},ajaxSuccess:function($form,response){$form.trigger('email-octopus.success');var successRedirectUrl=$form.find('input[name=successRedirectUrl]').val();if(successRedirectUrl&&successRedirectUrl.trim()){if(emailOctopus.debug){console.log('EmailOctopus: redirecting to '+successRedirectUrl);}
window.location.href=successRedirectUrl;}else{if(emailOctopus.debug){console.log('EmailOctopus: no redirect URL found, showing confirmation');}
var message=response.message?response.message:emailOctopus.successMessage;$form.siblings('.email-octopus-success-message').text(message);$form.hide();}},ajaxError:function($form,textStatus){var response=$.parseJSON(textStatus.responseText);var $errorMessage=$form.siblings('.email-octopus-error-message');if(response&&response.error&&response.error.code){switch(response.error.code){case 'INVALID_PARAMETERS':$errorMessage.text(emailOctopus.invalidParametersErrorMessage);return;case 'BOT_SUBMISSION':$errorMessage.text(emailOctopus.botSubmissionErrorMessage);return;}}
$errorMessage.text(emailOctopus.unknownErrorMessage);$form.find(':submit').removeAttr('disabled');},ajaxSubmit:function($form){$form.find(':submit').attr('disabled',true);$.post($form.attr('action'),$form.serialize()).done(function(response){if(emailOctopus.debug){console.log('EmailOctopus: posted');}
emailOctopus.ajaxSuccess($form,response);}).fail(function(textStatus){if(emailOctopus.debug){console.log('EmailOctopus: error while posting');}
emailOctopus.ajaxError($form,textStatus);});}};if(emailOctopus.debug){if(typeof window.jQuery==='undefined'){console.log('EmailOctopus: error, no jQuery');}
var $form=$('.email-octopus-form');if(!$form.length){console.error('EmailOctopus: Form missing');}
if(!$form.siblings('.email-octopus-error-message').length){console.error('EmailOctopus: Form missing error message section');}
if(!$form.find('input[type=email]').length){console.error('EmailOctopus: Form missing email address field');}}
$('.email-octopus-form:not(.bound)').submit(function(){if(emailOctopus.debug){console.log('EmailOctopus: form submitted');}
var $form=$(this);var $errorMessage=$form.siblings('.email-octopus-error-message');var emailAddress=$form.find('input[type=email]').val();$errorMessage.empty();if(emailOctopus.isBotPost($form)){if(emailOctopus.debug){console.error('EmailOctopus: Is bot post');}
$errorMessage.text(emailOctopus.botSubmissionErrorMessage);}else if(!$.trim(emailAddress)){if(emailOctopus.debug){console.error('EmailOctopus: Missing email address');}
$errorMessage.text(emailOctopus.missingEmailAddressMessage);}else if(!emailOctopus.basicValidateEmail(emailAddress)){if(emailOctopus.debug){console.error('EmailOctopus: Invalid email address');}
$errorMessage.text(emailOctopus.invalidEmailAddressMessage);}else if(emailOctopus.consentRequired($form)){if(emailOctopus.debug){console.error('EmailOctopus: Consent required');}
$errorMessage.text(emailOctopus.consentRequiredMessage);}else{if(emailOctopus.debug){console.log('EmailOctopus: posting');}
emailOctopus.ajaxSubmit($form);}
return false;}).addClass('bound');})(jQuery);